<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="../iron-icon/iron-icon.html" />
<link rel="import" href="../iron-icons/iron-icons.html" />
<link rel="import" href="./t-data-list.html" />

<dom-module id="t-data-feeder">
    <template>
        <style>
            label {
                color: #777777;
                font-size: 16px;
            }

            t-data-list {
                margin-top: 10px;
                --placeholder-color: rgba(100, 100, 100, 0.5);
            }
        </style>
        <label>{{label}}</label>
        <t-data-list id="data" on-data-changed="updateTarget" data='["First Choice", "Second Choice", "Third Choice"]'></t-data-list>
    </template>
    <script>
        Polymer({

            is: 't-data-feeder',

            properties: {
                target: {
                    type: Object,
                    value: function() {
                        return [];
                    }
                },

                label: {
                    type: String,
                    value: 'Add items'
                },

                _parameterPresent: {
                    type: Boolean,
                    value: false
                },

                parameter: {
                    type: String,
                    value: "",
                    notify: true,
                    observer: '_parameterChanged'
                }
            },

            _parameterChanged: function() {
                if (this.parameter == '') {
                    this.parameter = 'data';
                } else {
                    this._parameterPresent = true;
                }
            },

            _getValue: function(data, item) {
                return item[this.parameter];
            },

            updateTarget: function() {
                var data;

                if (!this.target) {
                    return;
                }

                data = this.$.data.get('data')
                this.target.setAttribute(this.parameter, JSON.stringify(data));
                this.fire('property-changed', this.target);
            }
        });
    </script>
</dom-module>